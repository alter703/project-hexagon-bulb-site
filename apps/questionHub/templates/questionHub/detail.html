{% extends 'base.html' %}

{% block title %}The question is {{question.title}}{% endblock %}

{% block content %}
 <div class="container mx-auto my-3 text-center border border-primary border-3 rounded-2">
  <div class="container overflow-hidden text-center">
    <div class="row gx-5 mt-4">
      <div class="col-2 text-start">
        <div class="p-3 fs-5 text-wrap">Author: <a href="{% url 'members:profile-detail' question.author.profile.id %}">{{question.author }}</a></div>
      </div>
      <div class="col text-start">
        <div class="p-2"><p class="fw-normal fs-2">{{ question.title }}</p></div>
      </div>
    </div>
  </div>
    <hr class="border border-dark border-1">
        <div class="row row-cols-5 row-cols-lg-6">
          <div class="col">
            <div class="p-1 text-wrap"><p class="italic">Asked: {{ question.created_at|timesince}} ago </p></div>
          </div>
          <div class="col">
            <div class="p-1 text-wrap"><p class="italic">Modified: {{ question.updated_at|timesince}} ago </p></div>
          </div>
          <div class="col">
            <div class="p-1 text-wrap"><p class="italic">Author: {{ question.author}} </p></div>
          </div>
          <div class="col">
            <div class="p-1 text-wrap">Relates to category: {{question.category}}</div>
          </div>
        </div>
        <hr class="border border-dark border-1">
        <div class="container mx-auto border-2">
          <p class="fs-5">{{question.content}}</p>
        </div>

        <div class="btn btn-secondary" id="toggleButton" onclick="toggleForm()"><i class="fa-solid fa-plus me-3"></i>Answer</div>
        <div class="container" id="toggleForm" style="display: none;">
          <div class="form-floating">
            <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea"></textarea>
            <label for="floatingTextarea">Your Answer</label>
          </div>
        </div>

        {% for answer in question.answers.all %}
        <div class="container">
          <div class="row gx-5">
            <div class="col-2">
             <div class="p-3">Author: {{ answer.author }}</div>
            </div>
            <div class="col">
              <div class="p-3 text-start">{{ answer.content }}</div>
            </div>
          </div>
        </div>
        {% endfor %}
</div>

<script>
        function toggleForm() {
            var button = document.getElementById("toggleButton");
            var form = document.getElementById("toggleForm");

            if (button.style.display === "none") {
                button.style.display = "block"; // Показуємо кнопку
                form.style.display = "none"; // Ховаємо поле вводу
            } else {
                button.style.display = "none"; // Ховаємо кнопку
                form.style.display = "block"; // Показуємо поле вводу
            }
        }
</script>
{% endblock %}
